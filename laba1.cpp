#include <iostream>
#include <cmath>
using namespace std;

struct Para {
    double first;   // дробное число
    double second;  // дробное число, показатель степени
    
    // Метод инициализации
    void init(double f, double s) {
        if (f == 0 && s <= 0) {
            cout << "Ошибка: недопустимые значения параметров (0 в неположительной степени)!" << endl;
            exit(1);
        }
        first = f;
        second = s;
    }
    
    // Метод ввода с клавиатуры
    void read() {
        cout << "Введите дробное число (first): ";
        cin >> first;
        cout << "Введите показатель степени (second): ";
        cin >> second;
        
        // Проверка корректности введенных данных
        if (first == 0 && second <= 0) {
            cout << "Ошибка: недопустимые значения (0 в неположительной степени)!" << endl;
            exit(1);
        }
    }
    
    // Метод вывода на экран
    void display() const {
        cout << "first: " << first << ", second: " << second << endl;
    }
    
    // Метод возведения числа first в степень second
    double power() const {
        return pow(first, second);
    }
};

// Внешняя функция для создания структуры Para
Para make_para(double a, double b) {
    if (a == 0 && b <= 0) {
        cout << "Ошибка: недопустимые параметры для make_para (0 в неположительной степени)!" << endl;
        exit(1);
    }
    
    Para p;
    p.init(a, b);
    return p;
}

int main() {
    // Демонстрация различных способов создания объектов
    
    cout << "=== ЛАБОРАТОРНАЯ РАБОТА №1. СТРУКТУРА-ПАРА ===\n" << endl;
    
    // 1. Создание статического объекта
    cout << "1. Статический объект:" << endl;
    Para p1;
    p1.init(2.5, 3.0);
    p1.display();
    cout << "Результат возведения в степень: " << p1.power() << endl;
    cout << endl;
    
    // 2. Создание объекта с вводом с клавиатуры
    cout << "2. Объект с вводом с клавиатуры:" << endl;
    Para p2;
    p2.read();
    p2.display();
    cout << "Результат возведения в степень: " << p2.power() << endl;
    cout << endl;
    
    // 3. Создание объекта через внешнюю функцию
    cout << "3. Объект через функцию make_para:" << endl;
    Para p3 = make_para(4.0, 0.5);  // Квадратный корень из 4
    p3.display();
    cout << "Результат возведения в степень: " << p3.power() << endl;
    cout << endl;
    
    // 4. Создание динамического объекта
    cout << "4. Динамический объект:" << endl;
    Para* p4 = new Para;
    p4->init(3.0, -2.0);  // 3 в степени -2 = 1/9
    p4->display();
    cout << "Результат возведения в степень: " << p4->power() << endl;
    delete p4;
    cout << endl;
    
    // 5. Создание массива объектов
    cout << "5. Массив объектов:" << endl;
    Para arr[3];
    
    // Инициализация элементов массива
    arr[0].init(5.0, 2.0);    // 5^2 = 25
    arr[1].init(10.0, 1.0);   // 10^1 = 10
    arr[2].init(2.0, 10.0);   // 2^10 = 1024
    
    // Использование методов для каждого элемента массива
    for (int i = 0; i < 3; i++) {
        cout << "Элемент " << i << ": ";
        arr[i].display();
        cout << "  Результат возведения в степень: " << arr[i].power() << endl;
    }
    cout << endl;
    
    // 6. Тестирование различных случаев
    cout << "6. Тестирование различных случаев:" << endl;
    
    // Тест 1: положительное число в положительной степени
    Para test1 = make_para(2.0, 3.0);
    cout << "Тест 1 (2.0^3.0): " << test1.power() << " (ожидается: 8)" << endl;
    
    // Тест 2: число в отрицательной степени
    Para test2 = make_para(2.0, -3.0);
    cout << "Тест 2 (2.0^-3.0): " << test2.power() << " (ожидается: 0.125)" << endl;
    
    // Тест 3: число в нулевой степени
    Para test3 = make_para(5.0, 0.0);
    cout << "Тест 3 (5.0^0.0): " << test3.power() << " (ожидается: 1)" << endl;
    
    // Тест 4: ноль в положительной степени
    Para test4;
    test4.init(0.0, 5.0);
    cout << "Тест 4 (0.0^5.0): " << test4.power() << " (ожидается: 0)" << endl;
    
    // Тест 5: дробное число в дробной степени
    Para test5 = make_para(16.0, 0.25);
    cout << "Тест 5 (16.0^0.25): " << test5.power() << " (ожидается: 2)" << endl;
    
    cout << "\n=== ПРОВЕРКА ЗАВЕРШЕНА ===" << endl;
    
    // Для задержки закрытия окна
    cout << "\nНажмите Enter для выхода...";
    cin.ignore();
    cin.get();
    
    return 0;
}
